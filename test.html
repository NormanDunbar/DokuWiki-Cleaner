<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="x-ua-compatible" content="IE=8">
  <title>
    qdosmsq:fs:qlwa · QDOSMSQ@Dunbar IT Consultants Ltd  </title>

  <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2009-01-05T11:32:39+0000"/>
<meta name="keywords" content="qdosmsq,fs,qlwa"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="QDOSMSQ@Dunbar IT Consultants Ltd"/>
<link rel="start" href="/"/>
<link rel="contents" href="/doku.php?id=qdosmsq:fs:qlwa&amp;do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="/feed.php?mode=list&amp;ns=qdosmsq:fs"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="/doku.php?do=export_xhtml&amp;id=qdosmsq:fs:qlwa"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="/doku.php?do=export_raw&amp;id=qdosmsq:fs:qlwa"/>
<link rel="canonical" href="http://qdosmsq.dunbar-it.co.uk/doku.php?id=qdosmsq:fs:qlwa"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=spacedok&amp;tseed=1364914317"/>
<script type="text/javascript">/*<![CDATA[*/var NS='qdosmsq:fs';var JSINFO = {"id":"qdosmsq:fs:qlwa","namespace":"qdosmsq:fs"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?tseed=1364914317"></script>

  <link rel="shortcut icon" href="/lib/tpl/spacedok/images/favicon.ico" />

  </head>

<body>
<div class="dokuwiki" id="spacedok__wide_left">
  
  <div class="header">
    <div class="logo">
      <a href="/doku.php?id=start"  name="dokuwiki__top" id="dokuwiki__top" accesskey="h" title="[ALT+H]">QDOSMSQ@Dunbar IT Consultants Ltd</a>    </div>
  </div>

  
  <div class="main">

    <div class="page">
        
      <!-- wikipage start -->
      <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#qlwa_hard_disk_structure">QLWA Hard Disk Structure</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#header">Header</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#derived_information">Derived Information</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#group_map">Group Map</a></div></li>
<li class="level2"><div class="li"><a href="#data_sectors">Data Sectors</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#root_directory">Root Directory</a></div></li>
<li class="level3"><div class="li"><a href="#directory_entry_format">Directory Entry Format</a></div></li>
<li class="level3"><div class="li"><a href="#sub-directories">Sub-directories</a></div></li>
<li class="level3"><div class="li"><a href="#user_files">User Files</a></div></li>
<li class="level3"><div class="li"><a href="#create_a_directory">Create A Directory</a></div></li>
<li class="level3"><div class="li"><a href="#delete_a_directory">Delete A Directory</a></div></li>
<li class="level3"><div class="li"><a href="#create_a_file">Create A File</a></div></li>
<li class="level3"><div class="li"><a href="#extend_a_file">Extend A File</a></div></li>
<li class="level3"><div class="li"><a href="#delete_a_file">Delete A File</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#formatting">Formatting</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#format_example">Format Example</a></div></li>
<li class="level3"><div class="li"><a href="#example_map_group_sizes">Example Map Group Sizes</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="qlwa_hard_disk_structure">QLWA Hard Disk Structure</h1>
<div class="level1">

<p>
<em> I am grateful for the help and advice of John Hall and Daniele Terdina in the
explanation of the QLWA hard disc format.</em>
</p>
<hr />

<p>
A hard disc  has the following physical layout :
</p>
<div class="table sectionedit2"><table class="inline">
	<tr class="row0">
		<td class="col0">Header</td><td class="col1">Group Map</td><td class="col2">Data&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit3" id="header">Header</h2>
<div class="level2">

<p>
The following is the header block structure for the first sector on a QDOS hard disc, or a
QPC or QXL <em>QXL.WIN</em> file. To avoid confusion, I shall refer to it as a QLWA format hard
disc.
</p>
<div class="table sectionedit4"><table class="inline">
	<tr class="row0">
		<th class="col0">Mnemonic</th><th class="col1">Offset</th><th class="col2">Size</th><th class="col3">Description</th>
	</tr>
	<tr class="row1">
		<td class="col0">qwa.id </td><td class="col1">$0000</td><td class="col2">4 bytes</td><td class="col3">&#039;QLWA&#039; - Identification bytes.</td>
	</tr>
	<tr class="row2">
		<td class="col0">qwa.pflg</td><td class="col1">$01 &amp; &#039;QWA&#039;</td><td class="col2">4 bytes</td><td class="col3">QWA partition flag. <font color="red"> (Any comments on what this means exactly?)</font></td>
	</tr>
	<tr class="row3">
		<td class="col0">qwa_name</td><td class="col1">$0004</td><td class="col2">22 bytes</td><td class="col3">up to 20 characters space padded name. Word count first then bytes.</td>
	</tr>
	<tr class="row4">
		<td class="col0">qwa_spr0</td><td class="col1">$001A</td><td class="col2">2 bytes</td><td class="col3">spare - set to zero.</td>
	</tr>
	<tr class="row5">
		<td class="col0">qwa_uchk</td><td class="col1">$001C</td><td class="col2">long</td><td class="col3">update check<sup>1</sup>.</td>
	</tr>
	<tr class="row6">
		<td class="col0">qwa_intl</td><td class="col1">$0020</td><td class="col2">word</td><td class="col3">interleave factor (0 = <abbr title="Small Computer System Interface">SCSI</abbr>/QXL.WIN).</td>
	</tr>
	<tr class="row7">
		<td class="col0">qwa_sctg</td><td class="col1">$0022</td><td class="col2">word</td><td class="col3">sectors per group.</td>
	</tr>
	<tr class="row8">
		<td class="col0">qwa_sctt</td><td class="col1">$0024</td><td class="col2">word</td><td class="col3">sectors per track (0 = <abbr title="Small Computer System Interface">SCSI</abbr>/QXL.WIN).</td>
	</tr>
	<tr class="row9">
		<td class="col0">qwa_trkc</td><td class="col1">$0026</td><td class="col2">word</td><td class="col3">tracks per cylinder (number of heads) (0 = <abbr title="Small Computer System Interface">SCSI</abbr>/QXL.WIN).</td>
	</tr>
	<tr class="row10">
		<td class="col0">qwa_cyld</td><td class="col1">$0028</td><td class="col2">word</td><td class="col3">cylinders per drive.</td>
	</tr>
	<tr class="row11">
		<td class="col0">qwa_ngrp</td><td class="col1">$002A</td><td class="col2">word</td><td class="col3">number of groups.</td>
	</tr>
	<tr class="row12">
		<td class="col0">qwa_fgrp</td><td class="col1">$002C</td><td class="col2">word</td><td class="col3">number of free groups.</td>
	</tr>
	<tr class="row13">
		<td class="col0">qwa_sctm</td><td class="col1">$002E</td><td class="col2">word</td><td class="col3">sectors per map.</td>
	</tr>
	<tr class="row14">
		<td class="col0">qwa_nmap</td><td class="col1">$0030</td><td class="col2">word</td><td class="col3">number of maps.</td>
	</tr>
	<tr class="row15">
		<td class="col0">qwa_free</td><td class="col1">$0032</td><td class="col2">word</td><td class="col3">first free group.</td>
	</tr>
	<tr class="row16">
		<td class="col0">qwa_root</td><td class="col1">$0034</td><td class="col2">word</td><td class="col3">root directory number.</td>
	</tr>
	<tr class="row17">
		<td class="col0">qwa_rlen</td><td class="col1">$0036</td><td class="col2">long</td><td class="col3">root directory length.</td>
	</tr>
	<tr class="row18">
		<td class="col0">qwa_fcyl</td><td class="col1">$003A</td><td class="col2">word</td><td class="col3">first cylinder number (ST506 only = Miracle Hard Disc?). <font color="red">OR</font> </td>
	</tr>
	<tr class="row19">
		<td class="col0">qwa_fsct</td><td class="col1">$003A</td><td class="col2">long</td><td class="col3">first sector for this partition (<abbr title="Small Computer System Interface">SCSI</abbr>/QXL.WIN).</td>
	</tr>
	<tr class="row20">
		<td class="col0">qwa_park</td><td class="col1">$003E</td><td class="col2">word</td><td class="col3">park cylinder.</td>
	</tr>
	<tr class="row21">
		<td class="col0">qwa_gmap</td><td class="col1">$0040</td><td class="col2">words</td><td class="col3">group map: each entry is one word and is number of next group or zero.</td>
	</tr>
</table></div>
<hr />

<p>
<strong>Notes:</strong>
</p>

<p>
1. The update check is incremented by 1 every time a file is created, deleted etc. If you open a file in <em>over</em> mode and then close it again without doing anything, this number will increment, this is because you have (just) overwritten the file!
</p>
<hr />

<p>
<br/>

The following is an initial attempt at an analysis of my QPC win1_ hard disc file.
</p>
<pre class="code">00000000  51 4c 57 41 00 04 57 49  4e 32 20 20 20 20 20 20  |QLWA..WIN2      |
00000010  20 20 20 20 20 20 20 20  20 20 00 00 ee 8c 00 ce  |          ......|
00000020  00 00 00 04 00 00 00 00  00 00 3c 00 08 71 00 3d  |..........&lt;..q.=|
00000030  00 01 33 8f 00 10 00 00  0a 00 00 00 00 00 00 00  |..3.............|</pre>

<p>
If we decode the above dump into something a bit more meaningful, we get the following.
</p>
<div class="table sectionedit5"><table class="inline">
	<tr class="row0">
		<th class="col0">Mnemonic</th><th class="col1">Offset</th><th class="col2">Value</th><th class="col3">Comments</th>
	</tr>
	<tr class="row1">
		<td class="col0">qwa.id </td><td class="col1">$0000</td><td class="col2">&#039;QLWA&#039;</td><td class="col3">QDOS hard disc identifier</td>
	</tr>
	<tr class="row2">
		<td class="col0">qwa_name</td><td class="col1">$0004</td><td class="col2">DC.W $0004,<br>DC.B &#039;WIN2&#039;</td><td class="col3">Disc label</td>
	</tr>
	<tr class="row3">
		<td class="col0">qwa_spr0</td><td class="col1">$001A</td><td class="col2">DC.W $0000</td><td class="col3">Spare</td>
	</tr>
	<tr class="row4">
		<td class="col0">qwa_uchk</td><td class="col1">$001C</td><td class="col2">DC.L $EE8C00CE</td><td class="col3">update check.</td>
	</tr>
	<tr class="row5">
		<td class="col0">qwa_intl</td><td class="col1">$0020</td><td class="col2">DC.W $0000</td><td class="col3">interleave factor.</td>
	</tr>
	<tr class="row6">
		<td class="col0">qwa_sctg</td><td class="col1">$0022</td><td class="col2">DC.W $0004</td><td class="col3">sectors per group.</td>
	</tr>
	<tr class="row7">
		<td class="col0">qwa_sctt</td><td class="col1">$0024</td><td class="col2">DC.W $0000</td><td class="col3">sectors per track.</td>
	</tr>
	<tr class="row8">
		<td class="col0">qwa_trkc</td><td class="col1">$0026</td><td class="col2">DC.W $0000</td><td class="col3">tracks per cylinder (number of heads).</td>
	</tr>
	<tr class="row9">
		<td class="col0">qwa_cyld</td><td class="col1">$0028</td><td class="col2">DC.W $0000</td><td class="col3">cylinders per drive.</td>
	</tr>
	<tr class="row10">
		<td class="col0">qwa_ngrp</td><td class="col1">$002A</td><td class="col2">DC.W $3C00</td><td class="col3">number of groups.</td>
	</tr>
	<tr class="row11">
		<td class="col0">qwa_fgrp</td><td class="col1">$002C</td><td class="col2">DC.W $0871</td><td class="col3">number of free groups.</td>
	</tr>
	<tr class="row12">
		<td class="col0">qwa_sctm</td><td class="col1">$002E</td><td class="col2">DC.W $003D</td><td class="col3">sectors per map.</td>
	</tr>
	<tr class="row13">
		<td class="col0">qwa_nmap</td><td class="col1">$0030</td><td class="col2">DC.W $0001</td><td class="col3">number of maps.</td>
	</tr>
	<tr class="row14">
		<td class="col0">qwa_free</td><td class="col1">$0032</td><td class="col2">DC.W $338F</td><td class="col3">first free group.</td>
	</tr>
	<tr class="row15">
		<td class="col0">qwa_root</td><td class="col1">$0034</td><td class="col2">DC.W $0010</td><td class="col3">root directory number.</td>
	</tr>
	<tr class="row16">
		<td class="col0">qwa_rlen</td><td class="col1">$0036</td><td class="col2">DC.L $00000A00</td><td class="col3">root directory length.</td>
	</tr>
	<tr class="row17">
		<td class="col0">qwa_fsct</td><td class="col1">$003A</td><td class="col2">DC.L $00000000</td><td class="col3">first sector for this partition.</td>
	</tr>
	<tr class="row18">
		<td class="col0">qwa_park</td><td class="col1">$003E</td><td class="col2">DC.W $0000</td><td class="col3">park cylinder.</td>
	</tr>
</table></div>

<p>
A &#039;STAT&#039; against Win1_ in QPC returns the following :
</p>
<pre class="code">WIN2 QDOS
8644/61440 sectors</pre>

<p>
So the disc label for Win1_ is actually &#039;WIN2&#039; for some reason - I suspect I may have
copied it at some point in the past! The 61,440 total sectors works out as the number of
groups from the first sector. The 8644 free sectors does not appear in the heading fields,
but the number of free groups * sectors per group comes out at exactly 8644 when converted
to decimal.
</p>

<p>
<em>Update: ok, when I formatted the drive I created it as the second drive, hence the WIN2 name. Had it been the third drive, it would be called WIN3 and so on. At present, there isn&#039;t a way to name a drive at format time similar to a floppy format</em>
</p>

</div>

<h3 class="sectionedit6" id="derived_information">Derived Information</h3>
<div class="level3">

<p>
From the above we can derive the following information :
</p>

<p>
Total Size in <abbr title="Megabyte">MB</abbr> = ((qwa_ngrp * qwa_sctg) * 512) / 1,048,576  <br/>

Free Space in <abbr title="Megabyte">MB</abbr> = ((qwa_fgrp * qwa_sctg) * 512) / 1,048,576
</p>

</div>

<h2 class="sectionedit7" id="group_map">Group Map</h2>
<div class="level2">

<p>
Following on from the &#039;disc&#039; header, we find the map at address $0040. The map is a series
of words (16 bit) which define whether a &#039;group&#039; is in use or free. When the drive is
formatted initially, the words are all set to point to the next free group. This means
that we have a linked list where group zero points at group one which points to group two
and so on. The end of all the groups is a word of zero.
</p>

<p>
A &#039;group&#039; as described above is a number of sectors, a sector being 512 bytes, as defined
by the value in qwa_sctg - number of sectors per group. In the example I&#039;m using, this is
4 giving me a group size of 4 * 512 or 2,048 bytes. This implies that the smallest files
that physically exists on a disc of this kind are at least 2,048 bytes in size.
</p>

<p>
I presume here that the group size is defined by the maximum number of groups that we
have in the map - limited to 65,536 by the word sized entries - and/or the size that we
format the disc to. My example is a 30 <abbr title="Megabyte">MB</abbr> file and has a group size of 2,048 bytes. With
65,536 groups allowed in total, this implies a maximum size of 128 <abbr title="Megabyte">MB</abbr>.
</p>

<p>
Formatting a disc to 130 <abbr title="Megabyte">MB</abbr> works - so obviously something is happening internally - and
in this case, the group size is changed from 4 sectors, 2,048 bytes to 5 sectors or 2,560
bytes.
</p>

<p>
The smallest disc I have formatted is a 1 <abbr title="Megabyte">MB</abbr> file, and it has a group size of 4 sectors as
well, so it appears that 4 sectors is the minimum size of a file on a &#039;qlwa&#039; formatted
hard disc.
</p>

<p>
Qwa_ngrp defines the number of groups that physically exist on this medium. It is possible
that there may be additional entries in the group map above this number, but these cannot
be accessed within the QLWA disc itself.
</p>

<p>
There are not always 65,536 entries in the map - it can be smaller according to the size of the QLWA disc.
</p>

<p>
Each entry in the group has two purposes. The first is to determine where the data is
located on disc and the second is to determine if there are any more groups of sectors
containing data for this file. 
</p>

<p>
The entry&#039;s index number is used to determine where on the disc the data starts :
</p>
<pre class="code">  index_number * qwa_sgrp * 512</pre>

<p>
The actual entry itself determines if more data exists for this file. If the word in the group map is zero, then the current entry is the last one for the file.
</p>

<p>
The following is the first few entries from my example
group map :
</p>
<pre class="code">00000040  00 01 00 02 00 03 00 04  00 05 00 06 00 07 00 08  |................|
00000050  00 09 00 0a 00 0b 00 0c  00 0d 00 0e 00 0f 00 00  |................|
00000060  00 5c 01 4e 0b ff 00 00  06 93 04 58 08 50 08 e5  |.\.N.......X.P..|
00000070  09 93 00 00 00 00 00 00  09 f3 00 00 00 00 00 00  |................|
00000080  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000090  00 00 00 00 00 00 00 00  00 00 00 00 13 06 00 00  |................|</pre>

<p>
Starting at address $40, we see that the first entry (entry zero) has the word $0001 in
it. So whichever file begins at entry zero on the map has a linked list of &#039;groups&#039; that
extends up to the zero word at address $5e. These groups of sectors belong to the map
itself. The map is always the first group of entries in itself (recursive or what?) and
the first real file after the map is always the root directory.
</p>

</div>

<h2 class="sectionedit8" id="data_sectors">Data Sectors</h2>
<div class="level2">

<p>
The data sectors contain the date that makes up user files plus the root directory and any
sub-directories created by the user. 
</p>

<p>
To find out where on the physical disc a file begins is actually quite simple :
</p>
<ul>
<li class="level1"><div class="li"> Take the File Id and multiply by the number of sectors per group. This gives the</div>
</li>
</ul>

<p>
sector number.
</p>
<ul>
<li class="level1"><div class="li"> Multiply the sector number by 512 to get the physical address.</div>
</li>
</ul>

<p>
So that&#039;s the first bit, we have the first &#039;n&#039; sectors of the file, where are the next &#039;n&#039;
sectors?
</p>
<ul>
<li class="level1"><div class="li"> Take the File Id again, and multiply by two to get the group map offset.</div>
</li>
<li class="level1"><div class="li"> Add this offset to $40 to get the map address.</div>
</li>
<li class="level1"><div class="li"> The word at this address is the &#039;File Id&#039; of the next chunk of this file.</div>
</li>
<li class="level1"><div class="li"> If this new File Id is zero, there is no next chunk of file.</div>
</li>
<li class="level1"><div class="li"> If the (new) File Id is non-zero then use it to access the disc as per the first chunk above.</div>
</li>
<li class="level1"><div class="li"> Repeat until we hit a word of zero in the group map.</div>
</li>
</ul>

<p>
Where does the File Id come from in the first place? It comes from the directory entry for
the file we are interested in. This is discussed below.
</p>

</div>

<h3 class="sectionedit9" id="root_directory">Root Directory</h3>
<div class="level3">

<p>
The root directory on QDOS floppy discs was always file zero. This allowed its place on
the physical medium to be easily determined. With the QLWA format, this is not so easy.
The map can take up more or less of the disc and the root directory cannot be found as
simply the first file on disc, so we need to have a pointer to the beginning of the root
directory in the disc header. This pointer is the qwa_root field and simply holds the file
id, or group map index, for the root directory&#039;s first group of &#039;n&#039; sectors.
</p>

<p>
Looking back at the header details above, we see that the root directory begins in block
$10. To find where our first chunk of the root directory is located we use the following :
</p>
<ul>
<li class="level1"><div class="li"> File Id = $10.</div>
</li>
<li class="level1"><div class="li"> Multiply by sectors in group = $10 * $04 = $40.</div>
</li>
<li class="level1"><div class="li"> Multiply by sector size = $40 * $200 = $8000.</div>
</li>
</ul>

<p>
The First &#039;n&#039; sectors of the root directory begins on disc at address $8000. Looking there
in my hex dump shows the following :
</p>
<pre class="code">00008000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00008010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00008020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00008030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|</pre>

<p>
Hmm, not much of interest there, but just after this we see the following:
</p>
<pre class="code">00008040  00 00 12 80 00 ff 00 00  00 00 00 00 00 00 00 03  |................|
00008050  70 65 6b 00 00 00 00 00  00 00 00 00 00 00 00 00  |pek.............|
00008060  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00008070  00 00 00 00 00 00 00 00  00 01 00 11 00 00 00 00  |................|
00008080  00 00 0d c0 00 ff 00 00  00 00 00 00 00 00 00 03  |................|
00008090  63 36 38 00 00 00 00 00  00 00 00 00 00 00 00 00  |c68.............|
000080a0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
000080b0  00 00 00 00 00 00 00 00  00 01 00 12 00 00 00 00  |................|
000080c0  00 00 07 c0 00 ff 00 00  00 00 00 00 00 00 00 06  |................|
000080d0  73 6f 75 72 63 65 00 00  00 00 00 00 00 00 00 00  |source..........|
000080e0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
000080f0  00 00 00 00 00 00 00 00  00 01 00 1d 00 00 00 00  |................|
00008100  00 00 01 80 00 ff 00 00  00 00 00 00 00 00 00 05  |................|</pre>

<p>
This looks much better. It appears that the root directory&#039;s own entry in itself, is all
zeros. Then following on from that we have the actual entries of the other files and sub-
directories in the normal 64 byte file header format.
</p>

<p>
So we have found the first chunk of the root directory but where are the rest of it,
assuming more exists? The Group Map tells us this.
</p>

<p>
Our File Id was originally $10 and that told us where the first chunk of directory was on disc. 
Looking at the group map again we can see :
</p>

<p>
Block $10 is at offset $40 + ($10 * 2) or address $60.
</p>

<p>
Looking into our map at that address we see the word $005c - this is the file id of the second chunk of
the root directory. We can calculate the start address of the second chunk of the directory in the same manner as above where we found where the beginning of the root directory was on disc :
</p>
<ul>
<li class="level1"><div class="li"> File Id = $5c.</div>
</li>
<li class="level1"><div class="li"> Multiply by sectors in group = $5c * $04 = $0170.</div>
</li>
<li class="level1"><div class="li"> Multiply by sector size = $0170 * $200 = $2e000.</div>
</li>
</ul>

<p>
This means that the second 2,048 bytes of the root directory should be at the above address. Looking at the file again, we see the following there :
</p>
<pre class="code">0002e000  00 00 02 c0 00 ff 00 00  00 00 00 00 00 00 00 05  |................|
0002e010  71 6d 6f 6e 32 00 00 00  00 00 00 00 00 00 00 00  |qmon2...........|
0002e020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
0002e030  00 00 00 00 00 00 00 00  00 01 00 5d 00 00 00 00  |...........]....|
0002e040  00 00 01 c0 00 ff 00 00  00 00 00 00 00 00 00 04  |................|
0002e050  74 65 73 74 00 00 00 00  00 00 00 00 00 00 00 00  |test............|
0002e060  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
0002e070  00 00 00 00 00 00 00 00  00 01 00 5e 00 00 00 00  |...........^....|
0002e080  00 00 06 c0 00 ff 00 00  00 00 00 00 00 00 00 09  |................|
0002e090  7a 69 70 5f 66 69 6c 65  73 00 00 00 00 00 00 00  |zip_files.......|</pre>

<p>
And indeed, this is the second part of my root directory. Is there any more?
</p>

<p>
Back in the group map at offset $40 + (File Id * 2) and using this for our File Id of $5c for the root directory, we find
an address of $f8. The word there points to the third group of &#039;n&#039; sectors for this file. We look at the word in that location and find a word of zero. This means that there is no third chunk of root directory. We have read it all in two chunks of 2,048 bytes.
</p>
<pre class="code">000000f0  00 00 00 00 00 00 2b aa  00 00 00 00 00 00 00 00  |......+.........|
                                   ^^^^^</pre>

</div>

<h3 class="sectionedit10" id="directory_entry_format">Directory Entry Format</h3>
<div class="level3">
<div class="table sectionedit11"><table class="inline">
	<tr class="row0">
		<th class="col0">Mnemonic</th><th class="col1">Offset</th><th class="col2">Size</th><th class="col3">Description</th>
	</tr>
	<tr class="row1">
		<td class="col0">hdr_flen</td><td class="col1">$00</td><td class="col2">long</td><td class="col3">File length<sup>1</sup></td>
	</tr>
	<tr class="row2">
		<td class="col0">hdr_accs</td><td class="col1">$04</td><td class="col2">byte</td><td class="col3">access control byte</td>
	</tr>
	<tr class="row3">
		<td class="col0">hdr_type</td><td class="col1">$05</td><td class="col2">byte</td><td class="col3">file type</td>
	</tr>
	<tr class="row4">
		<td class="col0">hdr_data</td><td class="col1">$06</td><td class="col2">long</td><td class="col3">program dataspace</td>
	</tr>
	<tr class="row5">
		<td class="col0">hdr_xtra</td><td class="col1">$0a</td><td class="col2">long</td><td class="col3">extra info</td>
	</tr>
	<tr class="row6">
		<td class="col0">hdr_name</td><td class="col1">$0e</td><td class="col2"> </td><td class="col3">file name (up to 36 characters long)<br>Word length<sup>2</sup> then bytes of name. Space filled.</td>
	</tr>
	<tr class="row7">
		<td class="col0">hdr_date</td><td class="col1">$34</td><td class="col2">long</td><td class="col3">update date</td>
	</tr>
	<tr class="row8">
		<td class="col0">hdr_vers</td><td class="col1">$38</td><td class="col2">word</td><td class="col3">version number</td>
	</tr>
	<tr class="row9">
		<td class="col0">hdr_flid</td><td class="col1">$3a</td><td class="col2">word</td><td class="col3">File id</td>
	</tr>
	<tr class="row10">
		<td class="col0">hdr_bkup</td><td class="col1">$3c</td><td class="col2">long</td><td class="col3">backup date</td>
	</tr>
</table></div>
<hr />

<p>
<strong>Notes</strong>
</p>

<p>
1. The hdr_flen field includes an extra 64 bytes for the copy of the directory header at the start of the file in storage. This is not shown when you <em>wstat</em> the drive. Also, I created a single byte file and the directory entry showed 66 bytes in size. <em>wstat</em> showed the file as only two bytes. This rounding to even is not consistent as I have a file with 107 bytes in it! (And no, there is not a linefeed at the end!)
</p>

<p>
2. If the length of the file name is zero, this is not a valid directory entry. It <em>may</em> be one for a file that has been deleted.
</p>
<hr />

<p>
<br/>

</p>

</div>

<h3 class="sectionedit12" id="sub-directories">Sub-directories</h3>
<div class="level3">

<p>
Sub-directories are exactly the same as the root directory. They have an entry in their parent directory which includes a file id number. This is used in exactly the same manner as for the root directory to find the location on disk.
</p>

<p>
As with the root directory, all sub-directories hold a blank entry (all zeros) as the very first one in the directory. 
</p>

</div>

<h3 class="sectionedit13" id="user_files">User Files</h3>
<div class="level3">

<p>
User files are identical to directories in as much as finding where they are on disc and so on, so the above calculations apply. 
</p>

<p>
There is a 64 byte copy of the directory entry for the file, stored at the beginning of each file in the actual data sectors on disc. Application programs do not see these 64 bytes. The following example shows this dummy 64 bytes.
</p>

<p>
This is the beginning of my boot file on my QPC hard disc :
</p>
<pre class="code">1000 TK2_EXT
1005 WTV 4
1010 PROG_USE &#039;win1_&#039;
1015 DATA_USE &#039;win1_&#039;
1020 :
1025 REMark LRESPR &#039;qpac2_ptr_gen&#039;
1030 REMark LRESPR &#039;qpac2_wman&#039;
1035 REMark LRESPR &#039;qpac2_hot_rext&#039;
1040 LRESPR &#039;qpac2_qpac2&#039;
1045 LRESPR &#039;qmenu_menu_rext&#039;
1050 LRESPR &#039;source_djtk_DJToolkit_bin&#039;
1052 LRESPR &#039;turbo415_turbo_tk_code&#039;</pre>

<p>
The directory entry for this file is as follows, I have highlighted the File Id in the directory entry.
</p>
<pre class="code">0002e0c0  00 00 04 6b 00 00 00 00  00 00 00 00 00 00 00 04  |...k............|
0002e0d0  62 6f 6f 74 00 00 00 00  00 00 00 00 00 00 00 00  |boot............|
0002e0e0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
0002e0f0  00 00 00 00 4e 4e a6 e6  00 01 00 60 57 c5 9f 16  |....NN.....`W...|
                                         ^^^^^ </pre>

<p>
Using the calculations to locate the start of the file on the sectors of the disc, we have :
</p>
<pre class="code">File Id = $60
Sectors In Group = $04
Sector Size = $200

So, $60 * $04 * $200 = $30000</pre>

<p>
Looking at the disc file at that location, we see the following :
</p>
<pre class="code">00030000  65 78 74 20 3d 3d 20 6c  69 66 6f 6e 6f 64 65 29  |ext == lifonode)|
00030010  0a 20 20 20 20 20 20 20  20 7b 0a 20 20 20 20 20  |.        {.     |
00030020  20 20 20 20 20 20 20 62  72 65 61 6b 3b 0a 20 20  |       break;.  |
00030030  20 20 20 20 20 20 7d 0a  20 20 20 20 7d 0a 20 20  |      }.    }.  |</pre>

<p>
The 4 rows above make up the dummy 64 byte file header. It looks like a load of garbage to me and is probably left over from whatever file was using this sector in the past, before my boot file was created. Following on from the above, we see this :
</p>
<pre class="code">00030040  31 30 30 30 20 54 4b 32  5f 45 58 54 0a 31 30 30  |1000 TK2_EXT.100|
00030050  35 20 57 54 56 20 34 0a  31 30 31 30 20 50 52 4f  |5 WTV 4.1010 PRO|
00030060  47 5f 55 53 45 20 27 77  69 6e 31 5f 27 0a 31 30  |G_USE &#039;win1_&#039;.10|
00030070  31 35 20 44 41 54 41 5f  55 53 45 20 27 77 69 6e  |15 DATA_USE &#039;win|
00030080  31 5f 27 0a 31 30 32 30  20 3a 0a 31 30 32 35 20  |1_&#039;.1020 :.1025 |
00030090  52 45 4d 61 72 6b 20 4c  52 45 53 50 52 20 27 71  |REMark LRESPR &#039;q|
000300a0  70 61 63 32 5f 70 74 72  5f 67 65 6e 27 0a 31 30  |pac2_ptr_gen&#039;.10|
000300b0  33 30 20 52 45 4d 61 72  6b 20 4c 52 45 53 50 52  |30 REMark LRESPR|
000300c0  20 27 71 70 61 63 32 5f  77 6d 61 6e 27 0a 31 30  | &#039;qpac2_wman&#039;.10|
000300d0  33 35 20 52 45 4d 61 72  6b 20 4c 52 45 53 50 52  |35 REMark LRESPR|
000300e0  20 27 71 70 61 63 32 5f  68 6f 74 5f 72 65 78 74  | &#039;qpac2_hot_rext|
000300f0  27 0a 31 30 34 30 20 4c  52 45 53 50 52 20 27 71  |&#039;.1040 LRESPR &#039;q|
00030100  70 61 63 32 5f 71 70 61  63 32 27 0a 31 30 34 35  |pac2_qpac2&#039;.1045|
00030110  20 4c 52 45 53 50 52 20  27 71 6d 65 6e 75 5f 6d  | LRESPR &#039;qmenu_m|
00030120  65 6e 75 5f 72 65 78 74  27 0a 31 30 35 30 20 4c  |enu_rext&#039;.1050 L|
00030130  52 45 53 50 52 20 27 73  6f 75 72 63 65 5f 64 6a  |RESPR &#039;source_dj|
00030140  74 6b 5f 44 4a 54 6f 6f  6c 6b 69 74 5f 62 69 6e  |tk_DJToolkit_bin|
00030150  27 0a 31 30 35 32 20 4c  52 45 53 50 52 20 27 74  |&#039;.1052 LRESPR &#039;t|
00030160  75 72 62 6f 34 31 35 5f  74 75 72 62 6f 5f 74 6b  |urbo415_turbo_tk|
00030170  5f 63 6f 64 65 27 0a 31  30 35 35 20 3a 0a 31 30  |_code&#039;.1055 :.10|</pre>

<p>
We can see from the above that the first 64 bytes of each file are total garbage. The so called copy of the directory header is not reliable in the slightest and cannot be used for any purpose what-so-ever by applications running on QDOSMSQ. However, applications running on Linux, Windows or Macs <em>might</em> be able to make use of these additional 64 bytes, if they really needed to.
</p>

</div>

<h3 class="sectionedit14" id="create_a_directory">Create A Directory</h3>
<div class="level3">

<p>
Creating a directory is easy. The length of the directory is always 64 bytes.
</p>
<ul>
<li class="level1"><div class="li"> Use the qwa_free value from the header as the FileId.</div>
</li>
<li class="level1"><div class="li"> Fetch the entry in the map for this FileId, and store it back in qwa_free as the new first free group.</div>
</li>
<li class="level1"><div class="li"> Put a word of zero into the map for the FileId we are using.</div>
</li>
<li class="level1"><div class="li"> Increment by one, the qwa_uchk field in the header.</div>
</li>
<li class="level1"><div class="li"> In the parent directory, create a 64 byte entry for the newly created directory. Remember, the length is initially set to 64 bytes.</div>
</li>
</ul>

</div>

<h3 class="sectionedit15" id="delete_a_directory">Delete A Directory</h3>
<div class="level3">

<p>
Normally you are not allowed to delete a directory unless it is empty. However, if you are deleting an empty directory, the process is exactly as described below for deleting a file.
</p>

<p>
I suppose if we wanted to delete a directory that was full, we should do something like the following :
</p>
<pre class="code">Procedure DeleteDirectoryTree(FileId, FileType)
  # Entry is with a FileId &amp; FileType representing the root or the directory tree we wish to delete.

  If FileType is not a directory then
    return
  End If

  For each entry in FileId&#039;s contents
    Find the FileId and FileType for the (next) entry in the directory
    If FileType is not a directory then
       DeleteFile(FileId)
    Else
       DeleteDirectoryTree(FileId, FileType)
    End If
  End For
  Return
End.
</pre>

</div>

<h3 class="sectionedit16" id="create_a_file">Create A File</h3>
<div class="level3">

<p>
Creating a file is easy too.
</p>
<ul>
<li class="level1"><div class="li"> Use the qwa_free value from the header as the FileId.</div>
</li>
<li class="level1"><div class="li"> Fetch the entry in the map for this FileId, and store it back in qwa_free as the new first free group.</div>
</li>
<li class="level1"><div class="li"> Put a word of zero into the map for the FileId we are using.</div>
</li>
<li class="level1"><div class="li"> Increment by one, the qwa_uchk field in the header.</div>
</li>
<li class="level1"><div class="li"> In the parent directory, create a 64 byte entry for the newly created file. The length will be 64 because although we ignore the first 64 bytes in all files, we still have to account for it in the directory.</div>
</li>
</ul>

</div>

<h3 class="sectionedit17" id="extend_a_file">Extend A File</h3>
<div class="level3">

</div>

<h3 class="sectionedit18" id="delete_a_file">Delete A File</h3>
<div class="level3">

<p>
The process to delete a file is quite simple, assuming the FileId you are attempting to delete belongs to a file and not to a directory. If it is a directory, you&#039;ll have to go recursive and delete all the files in the directory first. I leave that as an exercise for the reader! <img src="/lib/images/smileys/icon_lol.gif" class="icon" alt="LOL" />. Normally, however, you are not permitted to delete a directory that has any contents, so a recursive delete might not be needed.
</p>

<p>
Assuming that the FileId is indeed for a file, we can delete it as follows :
</p>
<ul>
<li class="level1"><div class="li"> Given the FileId from whichever directory the file lives in, go to that Map entry. </div>
</li>
<li class="level1"><div class="li"> Walk the list of chained map entries until you reach the final one counting entries as you go. </div>
</li>
<li class="level1"><div class="li"> Replace the zero word with the current FirstFreeGroup entry from the disc header. </div>
</li>
<li class="level1"><div class="li"> Update the header with the FileId as the new FirstFreeGroup. </div>
</li>
<li class="level1"><div class="li"> Add the number of groups the file used to need to the number of free groups in the disc header. </div>
</li>
<li class="level1"><div class="li"> Increment the header&#039;s update counter by 1.</div>
</li>
<li class="level1"><div class="li"> The Directory entry for the file has to have the file length and the file&#039;s name length set to zero.</div>
</li>
<li class="level1"><div class="li"> The actual sectors on disc are not touched in anyway.</div>
</li>
</ul>

<p>
So given this situation for a file called Win1_testfile :
</p>
<div class="table sectionedit19"><table class="inline">
	<tr class="row0">
		<td class="col0">FileId</td><td class="col1">$0003</td>
	</tr>
	<tr class="row1">
		<td class="col0">FileLength</td><td class="col1">$0000507C bytes</td>
	</tr>
	<tr class="row2">
		<td class="col0">FileNameLength</td><td class="col1">$0008</td>
	</tr>
	<tr class="row3">
		<td class="col0">FirstFreeGroup</td><td class="col1">$0009</td>
	</tr>
	<tr class="row4">
		<td class="col0">Map Entries for FileId $0003</td><td class="col1">$0004,$0005,$0006,$0007,$0008,$0000</td>
	</tr>
	<tr class="row5">
		<td class="col0">FreeList Map Entries (start at group $0009)</td><td class="col1">$000A,$000B,$000C,….</td>
	</tr>
	<tr class="row6">
		<td class="col0">FreeGroupsInMap</td><td class="col1">$03FD</td>
	</tr>
	<tr class="row7">
		<td class="col0">UpdateCounter</td><td class="col1">$085E0002</td>
	</tr>
</table></div>

<p>
Deleting the file with Id 3 frees up the space on the disc corresponding to the linked list of Map Entries from entry 3 through to entry 8 - the file is a &#039;big&#039; one of 6 groups of 4 (in this example) sectors. After the deletion, the situation is this :
</p>
<div class="table sectionedit20"><table class="inline">
	<tr class="row0">
		<td class="col0">FileId</td><td class="col1">$0003</td>
	</tr>
	<tr class="row1">
		<td class="col0">FileLength</td><td class="col1">$00000000 bytes</td>
	</tr>
	<tr class="row2">
		<td class="col0">FileNameLength</td><td class="col1">$0000</td>
	</tr>
	<tr class="row3">
		<td class="col0">FirstFreeGroup</td><td class="col1">$0003</td>
	</tr>
	<tr class="row4">
		<td class="col0">FreeList Map Entries (start at group $0003 now)</td><td class="col1">$0004,$0005,$0006,$0007,$0008,$0009,$000A,$000B,$000C,….</td>
	</tr>
	<tr class="row5">
		<td class="col0">FreeGroupsInMap</td><td class="col1">$0403</td>
	</tr>
	<tr class="row6">
		<td class="col0">UpdateCounter</td><td class="col1">$085E0003</td>
	</tr>
</table></div>

<p>
So the 6 groups of sectors that used to make up FileId 3 are now tagged onto the <em>front</em> of the free list and the header of the disc has been updated to reflect an additional 6 groups of free space. The update counter has been incremented as well.
</p>

<p>
It appears then that an <em>undelete</em> utility for QLWA format discs would not be of very much use as the space used by the file just deleted will be the first space used when any file is created or extended. Basically, if you delete a file, you need to undelete it almost immediately and certainly before updating or creating any files - including directories!
</p>

<p>
The before and after directory entries are as follows :
</p>
<pre class="code">00001040 : 00 00 50 7C 00 00 00 00  00 00 00 00 00 00 00 08    [..P|............]
00001050 : 54 45 53 54 46 49 4C 45  00 00 00 00 00 00 00 00    [TESTFILE........]
00001060 : 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00    [................]
00001070 : 00 00 00 00 59 19 7E 15  00 01 00 03 00 00 00 00    [....Y.~.........]</pre>
<pre class="code">00001040 : 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00    [................]
           ^^^^^^^^^^^                                ^^^^^
00001050 : 54 45 53 54 46 49 4C 45  00 00 00 00 00 00 00 00    [TESTFILE........]
00001060 : 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00    [................]
00001070 : 00 00 00 00 59 19 7E 15  00 01 00 03 00 00 00 00    [....Y.~.........]</pre>

</div>

<h2 class="sectionedit21" id="formatting">Formatting</h2>
<div class="level2">

<p>
Formatting a QXL.WIN file as a new hard disc is quite a simple process. From a few tests of various sizes of hard disc, I have determined the following process. Each and every sector group in the formatted disc has an entry in the map.
</p>
<ul>
<li class="level1"><div class="li"> The size of the disc is used to determine the number of sectors in a group. The minimum appears to be 4 (for a 1 <abbr title="Megabyte">MB</abbr>  disc) and increases by 1 each time the file gets too big to fit into the maximum of 65,536 map entries.</div>
</li>
<li class="level1"><div class="li"> The number of sectors in each map entry is calculated as the smallest number that fits into a maximum of 65,536 map entries. Roughly it is the larger of 4 or ((SizeInMb / 32) rounded up to the next whole number if not an exact multiple).</div>
</li>
<li class="level1"><div class="li"> The map is created in memory as a linked list of words, all pointing at the next word. The last one is set to zero.</div>
</li>
<li class="level1"><div class="li"> The header is initialised.</div>
</li>
<li class="level1"><div class="li"> The update check field high word is a copy of the system random number (SV_RAND), the low word is set to $0001.</div>
</li>
<li class="level1"><div class="li"> Each sector is written with 512 bytes of zeros. ($00 and not the character &#039;0&#039;.)</div>
</li>
</ul>

<p>
On a 32 bit system, the maximum size of a single disc file is limited to 4 Gb which is 4,096 Mb. A qxl.win file of this size, would use a group size of 128 sectors or 64 Kb.
</p>

</div>

<h3 class="sectionedit22" id="format_example">Format Example</h3>
<div class="level3">

<p>
Formatting a file, for use as WIN2, to 30Mb would create a header as follows :
</p>
<div class="table sectionedit23"><table class="inline">
	<tr class="row0">
		<th class="col0">Mnemonic</th><th class="col1">Offset</th><th class="col2">Value</th><th class="col3">Comments</th>
	</tr>
	<tr class="row1">
		<td class="col0">qwa.id </td><td class="col1">$0000</td><td class="col2">&#039;QLWA&#039;</td><td class="col3">Identifier.</td>
	</tr>
	<tr class="row2">
		<td class="col0">qwa_name</td><td class="col1">$0004</td><td class="col2">DC.W $0004,<br>DC.B &#039;WIN2&#039;</td><td class="col3">Disc name.</td>
	</tr>
	<tr class="row3">
		<td class="col0">qwa_spr0</td><td class="col1">$001A</td><td class="col2">DC.W $0000</td><td class="col3">Spare.</td>
	</tr>
	<tr class="row4">
		<td class="col0">qwa_uchk</td><td class="col1">$001C</td><td class="col2">DC.L $xxxx0001</td><td class="col3">Update check. The high word is set to the value in the SV_RAND system variable.</td>
	</tr>
	<tr class="row5">
		<td class="col0">qwa_intl</td><td class="col1">$0020</td><td class="col2">DC.W $0000</td><td class="col3">Interleave factor.</td>
	</tr>
	<tr class="row6">
		<td class="col0">qwa_sctg</td><td class="col1">$0022</td><td class="col2">DC.W $0004</td><td class="col3">Sectors per group.</td>
	</tr>
	<tr class="row7">
		<td class="col0">qwa_sctt</td><td class="col1">$0024</td><td class="col2">DC.W $0000</td><td class="col3">Sectors per track.</td>
	</tr>
	<tr class="row8">
		<td class="col0">qwa_trkc</td><td class="col1">$0026</td><td class="col2">DC.W $0000</td><td class="col3">Tracks per cylinder (number of heads).</td>
	</tr>
	<tr class="row9">
		<td class="col0">qwa_cyld</td><td class="col1">$0028</td><td class="col2">DC.W $0000</td><td class="col3">Cylinders per drive.</td>
	</tr>
	<tr class="row10">
		<td class="col0">qwa_ngrp</td><td class="col1">$002A</td><td class="col2">DC.W $3C00</td><td class="col3">Number of groups.</td>
	</tr>
	<tr class="row11">
		<td class="col0">qwa_fgrp</td><td class="col1">$002C</td><td class="col2">DC.W $3bf0</td><td class="col3">Number of free groups. (qwa_ngrp - qwa_root).</td>
	</tr>
	<tr class="row12">
		<td class="col0">qwa_sctm</td><td class="col1">$002E</td><td class="col2">DC.W $003D</td><td class="col3">Sectors per map.</td>
	</tr>
	<tr class="row13">
		<td class="col0">qwa_nmap</td><td class="col1">$0030</td><td class="col2">DC.W $0001</td><td class="col3">Number of maps.</td>
	</tr>
	<tr class="row14">
		<td class="col0">qwa_free</td><td class="col1">$0032</td><td class="col2">DC.W $0011</td><td class="col3">First free group. (qwa_root + 1).</td>
	</tr>
	<tr class="row15">
		<td class="col0">qwa_root</td><td class="col1">$0034</td><td class="col2">DC.W $0010</td><td class="col3">Root directory number. (qwa_sctm / qwa_sctg) + 1.</td>
	</tr>
	<tr class="row16">
		<td class="col0">qwa_rlen</td><td class="col1">$0036</td><td class="col2">DC.L $00000040</td><td class="col3">Root directory length.</td>
	</tr>
	<tr class="row17">
		<td class="col0">qwa_fsct</td><td class="col1">$003A</td><td class="col2">DC.L $00000000</td><td class="col3">First sector for this partition.</td>
	</tr>
	<tr class="row18">
		<td class="col0">qwa_park</td><td class="col1">$003E</td><td class="col2">DC.W $0000</td><td class="col3">Park cylinder.</td>
	</tr>
</table></div>
<ul>
<li class="level1"><div class="li"> Qwa_sctg is calculated as explained above, the size in Mb is divided by 32 and rounded up. If this is less than 4, then round up to 4. For our 30 Mb disc we get a group size of 4 sectors.</div>
</li>
<li class="level1"><div class="li"> The total number of sectors is simply 30Mb / 512 which is 61,440. This allows qwa_ngrp to be set to (61,440 / qwa_sctg) which gives us 15,360 or $3C00.</div>
</li>
<li class="level1"><div class="li"> Now we calculate ((qwa_ngrp * $0002) + $0040) / 512 rounded up to the next full sector size for our number of sectors to hold the map. (qwa_sctm). This works out at $003D.</div>
</li>
<li class="level1"><div class="li"> Qwa_sctm is the number of sectors the group map requires, so that equates to the first (qwa_sctm/qwa_sctg) entries in the map. This works out at $003D/$0004 = $000F so the first 15 entries in the map belong to the map itself. This means that the root directory will get the following entry, $0010, and this is used as the root directory&#039;s file number in qwa_root.</div>
</li>
<li class="level1"><div class="li"> The root directory length is preset to $0040 - this is an empty file in other words. Remember, every file&#039;s length in the directory is 64 bytes bigger than it really is as there is a waste of 64 bytes at the start of the first sector of every file. Directories are no exception.</div>
</li>
<li class="level1"><div class="li"> Qwa_free, the first free group in the map, is qwa_root + 1.</div>
</li>
<li class="level1"><div class="li"> Qwa_fgrp, the number of free groups, is set to (qwa_ngrp - qwa_root)</div>
</li>
</ul>

<p>
The header takes up the first $0040 bytes of the first sector of the qxl.win disc.
</p>

<p>
Following the header is the map. The map starts with the groups required for the map itself. In a 30Mb file, as calculated above, the map requires $003D sectors (from qwa_sctm) which means 15 groups of qwa_sctg (4) sectors. Then we have the zero word (indicated below) for the first, and only, sector group for the root directory.
</p>
<pre class="code">00000040 : 00 01 00 02 00 03 00 04  00 05 00 06 00 07 00 08    [................]
00000050 : 00 09 00 0A 00 0B 00 0C  00 0D 00 0E 00 0F 00 00    [................]
                                                      ^^^^^</pre>

<p>
Following the entries for the map itself and the root directory, every other entry in the map is a free group.
</p>
<pre class="code">00000060 : 00 11 00 12 00 13 00 14  00 15 00 16 00 17 00 18    [................]
...
00007830 : 3B F9 3B FA 3B FB 3B FC  3B FD 3B FE 3B FF 00 00    [................]</pre>

<p>
The remainder of the file is simply filled with CHR$(0).
</p>

</div>

<h3 class="sectionedit24" id="example_map_group_sizes">Example Map Group Sizes</h3>
<div class="level3">

<p>
The table below shows a list of all the group sizes (in sectors) and the maximum size of a qxl.win file with that group size.
</p>

<p>
<em>In order to reduce the length of the page, I&#039;ve created the table with 4 pairs of columns rather than one. This means that there are not 124 lines, only 32. <img src="/lib/images/smileys/icon_lol.gif" class="icon" alt="LOL" /> Read across then down.</em>
</p>
<div class="table sectionedit25"><table class="inline">
	<tr class="row0">
		<th class="col0">Group Size</th><th class="col1">Disc size (Mb)</th><th class="col2"> </th><th class="col3">Group Size</th><th class="col4">Disc size (Mb)</th><th class="col5"> </th><th class="col6">Group Size</th><th class="col7">Disc size (Mb)</th><th class="col8"> </th><th class="col9">Group Size</th><th class="col10">Disc size (Mb)</th>
	</tr>
	<tr class="row1">
		<td class="col0 rightalign">    4</td><td class="col1 rightalign">   128</td><td class="col2"> </td><td class="col3 rightalign">    5</td><td class="col4 rightalign">   160</td><td class="col5"> </td><td class="col6 rightalign">    6</td><td class="col7 rightalign">   192</td><td class="col8"> </td><td class="col9 rightalign">    7</td><td class="col10 rightalign">   224</td>
	</tr>
	<tr class="row2">
		<td class="col0 rightalign">    8</td><td class="col1 rightalign">   256</td><td class="col2"> </td><td class="col3 rightalign">    9</td><td class="col4 rightalign">   288</td><td class="col5"> </td><td class="col6 rightalign">   10</td><td class="col7 rightalign">   320</td><td class="col8"> </td><td class="col9 rightalign">   11</td><td class="col10 rightalign">   352</td>
	</tr>
	<tr class="row3">
		<td class="col0 rightalign">   12</td><td class="col1 rightalign">   384</td><td class="col2"> </td><td class="col3 rightalign">   13</td><td class="col4 rightalign">   416</td><td class="col5"> </td><td class="col6 rightalign">   14</td><td class="col7 rightalign">   448</td><td class="col8"> </td><td class="col9 rightalign">   15</td><td class="col10 rightalign">   480</td>
	</tr>
	<tr class="row4">
		<td class="col0 rightalign">   16</td><td class="col1 rightalign">   512</td><td class="col2"> </td><td class="col3 rightalign">   17</td><td class="col4 rightalign">   544</td><td class="col5"> </td><td class="col6 rightalign">   18</td><td class="col7 rightalign">   576</td><td class="col8"> </td><td class="col9 rightalign">   19</td><td class="col10 rightalign">   608</td>
	</tr>
	<tr class="row5">
		<td class="col0 rightalign">   20</td><td class="col1 rightalign">   640</td><td class="col2"> </td><td class="col3 rightalign">   21</td><td class="col4 rightalign">   672</td><td class="col5"> </td><td class="col6 rightalign">   22</td><td class="col7 rightalign">   704</td><td class="col8"> </td><td class="col9 rightalign">   23</td><td class="col10 rightalign">   736</td>
	</tr>
	<tr class="row6">
		<td class="col0 rightalign">   24</td><td class="col1 rightalign">   768</td><td class="col2"> </td><td class="col3 rightalign">   25</td><td class="col4 rightalign">   800</td><td class="col5"> </td><td class="col6 rightalign">   26</td><td class="col7 rightalign">   832</td><td class="col8"> </td><td class="col9 rightalign">   27</td><td class="col10 rightalign">   864</td>
	</tr>
	<tr class="row7">
		<td class="col0 rightalign">   28</td><td class="col1 rightalign">   896</td><td class="col2"> </td><td class="col3 rightalign">   29</td><td class="col4 rightalign">   928</td><td class="col5"> </td><td class="col6 rightalign">   30</td><td class="col7 rightalign">   960</td><td class="col8"> </td><td class="col9 rightalign">   31</td><td class="col10 rightalign">   992</td>
	</tr>
	<tr class="row8">
		<td class="col0 rightalign">   32</td><td class="col1 rightalign">  1024</td><td class="col2"> </td><td class="col3 rightalign">   33</td><td class="col4 rightalign">  1056</td><td class="col5"> </td><td class="col6 rightalign">   34</td><td class="col7 rightalign">  1088</td><td class="col8"> </td><td class="col9 rightalign">   35</td><td class="col10 rightalign">  1120</td>
	</tr>
	<tr class="row9">
		<td class="col0 rightalign">   36</td><td class="col1 rightalign">  1152</td><td class="col2"> </td><td class="col3 rightalign">   37</td><td class="col4 rightalign">  1184</td><td class="col5"> </td><td class="col6 rightalign">   38</td><td class="col7 rightalign">  1216</td><td class="col8"> </td><td class="col9 rightalign">   39</td><td class="col10 rightalign">  1248</td>
	</tr>
	<tr class="row10">
		<td class="col0 rightalign">   40</td><td class="col1 rightalign">  1280</td><td class="col2"> </td><td class="col3 rightalign">   41</td><td class="col4 rightalign">  1312</td><td class="col5"> </td><td class="col6 rightalign">   42</td><td class="col7 rightalign">  1344</td><td class="col8"> </td><td class="col9 rightalign">   43</td><td class="col10 rightalign">  1376</td>
	</tr>
	<tr class="row11">
		<td class="col0 rightalign">   44</td><td class="col1 rightalign">  1408</td><td class="col2"> </td><td class="col3 rightalign">   45</td><td class="col4 rightalign">  1440</td><td class="col5"> </td><td class="col6 rightalign">   46</td><td class="col7 rightalign">  1472</td><td class="col8"> </td><td class="col9 rightalign">   47</td><td class="col10 rightalign">  1504</td>
	</tr>
	<tr class="row12">
		<td class="col0 rightalign">   48</td><td class="col1 rightalign">  1536</td><td class="col2"> </td><td class="col3 rightalign">   49</td><td class="col4 rightalign">  1568</td><td class="col5"> </td><td class="col6 rightalign">   50</td><td class="col7 rightalign">  1600</td><td class="col8"> </td><td class="col9 rightalign">   51</td><td class="col10 rightalign">  1632</td>
	</tr>
	<tr class="row13">
		<td class="col0 rightalign">   52</td><td class="col1 rightalign">  1664</td><td class="col2"> </td><td class="col3 rightalign">   53</td><td class="col4 rightalign">  1696</td><td class="col5"> </td><td class="col6 rightalign">   54</td><td class="col7 rightalign">  1728</td><td class="col8"> </td><td class="col9 rightalign">   55</td><td class="col10 rightalign">  1760</td>
	</tr>
	<tr class="row14">
		<td class="col0 rightalign">   56</td><td class="col1 rightalign">  1792</td><td class="col2"> </td><td class="col3 rightalign">   57</td><td class="col4 rightalign">  1824</td><td class="col5"> </td><td class="col6 rightalign">   58</td><td class="col7 rightalign">  1856</td><td class="col8"> </td><td class="col9 rightalign">   59</td><td class="col10 rightalign">  1888</td>
	</tr>
	<tr class="row15">
		<td class="col0 rightalign">   60</td><td class="col1 rightalign">  1920</td><td class="col2"> </td><td class="col3 rightalign">   61</td><td class="col4 rightalign">  1952</td><td class="col5"> </td><td class="col6 rightalign">   62</td><td class="col7 rightalign">  1984</td><td class="col8"> </td><td class="col9 rightalign">   63</td><td class="col10 rightalign">  2016</td>
	</tr>
	<tr class="row16">
		<td class="col0 rightalign">   64</td><td class="col1 rightalign">  2048</td><td class="col2"> </td><td class="col3 rightalign">   65</td><td class="col4 rightalign">  2080</td><td class="col5"> </td><td class="col6 rightalign">   66</td><td class="col7 rightalign">  2112</td><td class="col8"> </td><td class="col9 rightalign">   67</td><td class="col10 rightalign">  2144</td>
	</tr>
	<tr class="row17">
		<td class="col0 rightalign">   68</td><td class="col1 rightalign">  2176</td><td class="col2"> </td><td class="col3 rightalign">   69</td><td class="col4 rightalign">  2208</td><td class="col5"> </td><td class="col6 rightalign">   70</td><td class="col7 rightalign">  2240</td><td class="col8"> </td><td class="col9 rightalign">   71</td><td class="col10 rightalign">  2272</td>
	</tr>
	<tr class="row18">
		<td class="col0 rightalign">   72</td><td class="col1 rightalign">  2304</td><td class="col2"> </td><td class="col3 rightalign">   73</td><td class="col4 rightalign">  2336</td><td class="col5"> </td><td class="col6 rightalign">   74</td><td class="col7 rightalign">  2368</td><td class="col8"> </td><td class="col9 rightalign">   75</td><td class="col10 rightalign">  2400</td>
	</tr>
	<tr class="row19">
		<td class="col0 rightalign">   76</td><td class="col1 rightalign">  2432</td><td class="col2"> </td><td class="col3 rightalign">   77</td><td class="col4 rightalign">  2464</td><td class="col5"> </td><td class="col6 rightalign">   78</td><td class="col7 rightalign">  2496</td><td class="col8"> </td><td class="col9 rightalign">   79</td><td class="col10 rightalign">  2528</td>
	</tr>
	<tr class="row20">
		<td class="col0 rightalign">   80</td><td class="col1 rightalign">  2560</td><td class="col2"> </td><td class="col3 rightalign">   81</td><td class="col4 rightalign">  2592</td><td class="col5"> </td><td class="col6 rightalign">   82</td><td class="col7 rightalign">  2624</td><td class="col8"> </td><td class="col9 rightalign">   83</td><td class="col10 rightalign">  2656</td>
	</tr>
	<tr class="row21">
		<td class="col0 rightalign">   84</td><td class="col1 rightalign">  2688</td><td class="col2"> </td><td class="col3 rightalign">   85</td><td class="col4 rightalign">  2720</td><td class="col5"> </td><td class="col6 rightalign">   86</td><td class="col7 rightalign">  2752</td><td class="col8"> </td><td class="col9 rightalign">   87</td><td class="col10 rightalign">  2784</td>
	</tr>
	<tr class="row22">
		<td class="col0 rightalign">   88</td><td class="col1 rightalign">  2816</td><td class="col2"> </td><td class="col3 rightalign">   89</td><td class="col4 rightalign">  2848</td><td class="col5"> </td><td class="col6 rightalign">   90</td><td class="col7 rightalign">  2880</td><td class="col8"> </td><td class="col9 rightalign">   91</td><td class="col10 rightalign">  2912</td>
	</tr>
	<tr class="row23">
		<td class="col0 rightalign">   92</td><td class="col1 rightalign">  2944</td><td class="col2"> </td><td class="col3 rightalign">   93</td><td class="col4 rightalign">  2976</td><td class="col5"> </td><td class="col6 rightalign">   94</td><td class="col7 rightalign">  3008</td><td class="col8"> </td><td class="col9 rightalign">   95</td><td class="col10 rightalign">  3040</td>
	</tr>
	<tr class="row24">
		<td class="col0 rightalign">   96</td><td class="col1 rightalign">  3072</td><td class="col2"> </td><td class="col3 rightalign">   97</td><td class="col4 rightalign">  3104</td><td class="col5"> </td><td class="col6 rightalign">   98</td><td class="col7 rightalign">  3136</td><td class="col8"> </td><td class="col9 rightalign">   99</td><td class="col10 rightalign">  3168</td>
	</tr>
	<tr class="row25">
		<td class="col0 rightalign">  100</td><td class="col1 rightalign">  3200</td><td class="col2"> </td><td class="col3 rightalign">  101</td><td class="col4 rightalign">  3232</td><td class="col5"> </td><td class="col6 rightalign">  102</td><td class="col7 rightalign">  3264</td><td class="col8"> </td><td class="col9 rightalign">  103</td><td class="col10 rightalign">  3296</td>
	</tr>
	<tr class="row26">
		<td class="col0 rightalign">  104</td><td class="col1 rightalign">  3328</td><td class="col2"> </td><td class="col3 rightalign">  105</td><td class="col4 rightalign">  3360</td><td class="col5"> </td><td class="col6 rightalign">  106</td><td class="col7 rightalign">  3392</td><td class="col8"> </td><td class="col9 rightalign">  107</td><td class="col10 rightalign">  3424</td>
	</tr>
	<tr class="row27">
		<td class="col0 rightalign">  108</td><td class="col1 rightalign">  3456</td><td class="col2"> </td><td class="col3 rightalign">  109</td><td class="col4 rightalign">  3488</td><td class="col5"> </td><td class="col6 rightalign">  110</td><td class="col7 rightalign">  3520</td><td class="col8"> </td><td class="col9 rightalign">  111</td><td class="col10 rightalign">  3552</td>
	</tr>
	<tr class="row28">
		<td class="col0 rightalign">  112</td><td class="col1 rightalign">  3584</td><td class="col2"> </td><td class="col3 rightalign">  113</td><td class="col4 rightalign">  3616</td><td class="col5"> </td><td class="col6 rightalign">  114</td><td class="col7 rightalign">  3648</td><td class="col8"> </td><td class="col9 rightalign">  115</td><td class="col10 rightalign">  3680</td>
	</tr>
	<tr class="row29">
		<td class="col0 rightalign">  116</td><td class="col1 rightalign">  3712</td><td class="col2"> </td><td class="col3 rightalign">  117</td><td class="col4 rightalign">  3744</td><td class="col5"> </td><td class="col6 rightalign">  118</td><td class="col7 rightalign">  3776</td><td class="col8"> </td><td class="col9 rightalign">  119</td><td class="col10 rightalign">  3808</td>
	</tr>
	<tr class="row30">
		<td class="col0 rightalign">  120</td><td class="col1 rightalign">  3840</td><td class="col2"> </td><td class="col3 rightalign">  121</td><td class="col4 rightalign">  3872</td><td class="col5"> </td><td class="col6 rightalign">  122</td><td class="col7 rightalign">  3904</td><td class="col8"> </td><td class="col9 rightalign">  123</td><td class="col10 rightalign">  3936</td>
	</tr>
	<tr class="row31">
		<td class="col0 rightalign">  124</td><td class="col1 rightalign">  3968</td><td class="col2"> </td><td class="col3 rightalign">  125</td><td class="col4 rightalign">  4000</td><td class="col5"> </td><td class="col6 rightalign">  126</td><td class="col7 rightalign">  4032</td><td class="col8"> </td><td class="col9 rightalign">  127</td><td class="col10 rightalign">  4064</td>
	</tr>
	<tr class="row32">
		<td class="col0 rightalign">  128</td><td class="col1 rightalign">  4096</td><td class="col2"> </td><td class="col3 leftalign">     </td><td class="col4 leftalign">      </td><td class="col5"> </td><td class="col6 leftalign">     </td><td class="col7 leftalign">      </td><td class="col8"> </td><td class="col9 leftalign">     </td><td class="col10 leftalign">      </td>
	</tr>
</table></div>

</div>

      <!-- wikipage stop -->
      
            <div class="meta">
        /home/qdosmsq/public_html/data/pages/qdosmsq/fs/qlwa.txt · Last modified: 2009/01/05 11:32 by norman      </div>
            
        
          </div><!-- page -->
    
    <div class="sidebar">
      <p><strong><a href="http://tonybaldwin.me">tonybaldwin.me</a></strong></p>
      
<h1 class="sectionedit1" id="sitemap">Sitemap</h1>
<div class="level1">

<p>
This is a sitemap over all available pages ordered by <a href="http://www.dokuwiki.org/namespaces" class="interwiki iw_doku" title="http://www.dokuwiki.org/namespaces">namespaces</a>.
</p>

</div>
<div id="index__tree">
<ul class="idx">
<li class="closed"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=linux" class="idx_dir"><strong>linux</strong></a></div></li>
<li class="closed"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=playground" class="idx_dir"><strong>playground</strong></a></div></li>
<li class="open"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=qdosmsq" class="idx_dir"><strong>qdosmsq</strong></a></div>
<ul class="idx">
<li class="closed"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=qdosmsq%3Aerrors" class="idx_dir"><strong>errors</strong></a></div></li>
<li class="open"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=qdosmsq%3Afs" class="idx_dir"><strong>fs</strong></a></div>
<ul class="idx">
<li class="level3"><div class="li"><a href="/doku.php?id=qdosmsq:fs:dsdd" class="wikilink1" title="qdosmsq:fs:dsdd">dsdd</a></div></li>
<li class="level3"><div class="li"><a href="/doku.php?id=qdosmsq:fs:funny" class="wikilink1" title="qdosmsq:fs:funny">funny</a></div></li>
<li class="level3"><div class="li"><span class="curid"><a href="/doku.php?id=qdosmsq:fs:qlwa" class="wikilink1" title="qdosmsq:fs:qlwa">qlwa</a></span></div></li>
<li class="level3"><div class="li"><a href="/doku.php?id=qdosmsq:fs:start" class="wikilink1" title="qdosmsq:fs:start">start</a></div></li>
</ul>
</li>
<li class="closed"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=qdosmsq%3Ajobs" class="idx_dir"><strong>jobs</strong></a></div></li>
<li class="closed"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=qdosmsq%3Amemory" class="idx_dir"><strong>memory</strong></a></div></li>
<li class="closed"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=qdosmsq%3Ape" class="idx_dir"><strong>pe</strong></a></div></li>
<li class="closed"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=qdosmsq%3Asbinternal" class="idx_dir"><strong>sbinternal</strong></a></div></li>
<li class="closed"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=qdosmsq%3Asysvars" class="idx_dir"><strong>sysvars</strong></a></div></li>
<li class="closed"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=qdosmsq%3Atraps" class="idx_dir"><strong>traps</strong></a></div></li>
<li class="closed"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=qdosmsq%3Avectors" class="idx_dir"><strong>vectors</strong></a></div></li>
<li class="level2"><div class="li"><a href="/doku.php?id=qdosmsq:start" class="wikilink1" title="qdosmsq:start">start</a></div></li>
</ul>
</li>
<li class="closed"><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;idx=wiki" class="idx_dir"><strong>wiki</strong></a></div></li>
<li class="level1"><div class="li"><a href="/doku.php?id=start" class="wikilink1" title="start">start</a></div></li>
</ul>
</div>      <hr />
              <ul>
          <li><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></div></li>
          <li><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></div></li>
        </ul>
            <div class="search"><form action="/doku.php?id=start" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form></div>
              <hr />
        <ul>
          <li><div class="li"><a href="/doku.php?id=qdosmsq:fs:qlwa&amp;do=login&amp;sectok=a233e36b97fbc8157451a15b2c4cdb10"  class="action login" rel="nofollow" title="Login">Login</a>                                      </ul>
          </div><!-- sidebar -->
  
  </div><!-- main -->

  <div class="main">
  
      
        <div class="breadcrumbs">
      <span class="bchead">You are here: </span><a href="/doku.php?id=start" class="wikilink1" title="start">start</a> » <a href="/doku.php?id=qdosmsq:start" class="wikilink1" title="qdosmsq:start">qdosmsq</a> » <a href="/doku.php?id=qdosmsq:fs:start" class="wikilink1" title="qdosmsq:fs:start">fs</a> » <span class="curid"><a href="/doku.php?id=qdosmsq:fs:qlwa" class="wikilink1" title="qdosmsq:fs:qlwa">qlwa</a></span>    </div>
        
    
        
      
  </div>

  <!-- 
  <div class="footer">
    <div class="edgeleft"><div class="borderbottom">&nbsp;</div></div>
    <div class="edgeright"><div class="borderbottom">&nbsp;</div></div>
  </div><!-- footer -->
--!>

</div>

<div class="footerinc">
  <a  href="/feed.php" title="Recent changes RSS feed"><img src="/lib/tpl/spacedok/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" /></a>

  <a  href="http://creativecommons.org/licenses/by-nc-sa/2.0/" rel="license" title="Creative Commons License"><img src="/lib/tpl/spacedok/images/button-cc.gif" width="80" height="15" alt="Creative Commons License" /></a>

  <a  href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=wikidesign%40gmail%2ecom&item_name=DokuWiki%20Template&item_number=Minima&no_shipping=2&no_note=1&tax=0&currency_code=EUR&bn=PP%2dDonationsBF&charset=UTF%2d8" title="Donate"><img src="/lib/tpl/spacedok/images/button-donate.gif" alt="Donate" width="80" height="15" /></a>
  
  <a  href="http://www.wikidesign.ch/" title="Minima Template by Wikidesign"><img src="/lib/tpl/spacedok/images/button-wikidesign.gif" width="80" height="15" alt="Minima Template by Wikidesign" /></a>
  
  <a  href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="/lib/tpl/spacedok/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>



<!--

<rdf:RDF xmlns="http://web.resource.org/cc/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
   <license rdf:resource="http://creativecommons.org/licenses/by-nc-sa/2.0/" />
</Work>

<License rdf:about="http://creativecommons.org/licenses/by-nc-sa/2.0/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <requires rdf:resource="http://web.resource.org/cc/Attribution" />
   <prohibits rdf:resource="http://web.resource.org/cc/CommercialUse" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
</License>

</rdf:RDF>

-->


</div>

<div class="no"><img src="/lib/exe/indexer.php?id=qdosmsq%3Afs%3Aqlwa&amp;1429301214" width="2" height="1" alt="" /></div>
</body>
</html>
